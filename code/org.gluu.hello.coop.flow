Flow org.gluu.hello.coop
     Basepath ""
     Configs conf
Log "@info hello-agama: flow initiated successfully"
oauthParams = conf.hello.oauth
uidPrefix = conf.hello.uidPrefix
Log "@debug oauth configurations parsed successfully " oauthParams
authResult | e = Trigger org.gluu.inbound.oauth2.AuthzCodeWithUserInfo oauthParams
When authResult is not null and authResult.success is true
     profile = authResult.data.profile
     token = authResult.data.tokenResponse
     uid = Call io.jans.inbound.UserOnboardHelper#exec uidPrefix profile
     Log "@info [agama-hello] user login successfully with " uid 
     it_gntgv = undefined
     Finish it_gntgv
Log "@error openid agama flow is missing. please install agama-openid first"
it_qkbtf = {success:false, error: "agama-openid flow is missing. please install agama-openid first."}
Finish it_qkbtf